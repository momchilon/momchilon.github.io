import{c as j,r as n,j as e,s as o}from"./index-1NSynUhw.js";import{P as S,S as A,T as C}from"./trash-2-BKITH9oP.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=j("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=j("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),U=()=>{const[m,w]=n.useState([]),[y,h]=n.useState(!0),[N,u]=n.useState(!1),[t,r]=n.useState(null),[v,g]=n.useState(!1),x=async()=>{h(!0);try{const{data:s,error:a}=await o.from("crew_members").select("*").order("name",{ascending:!0});if(a)throw a;w(s||[])}catch(s){console.error("Error fetching crew members:",s),alert("Error fetching crew members. Please try again.")}finally{h(!1)}};n.useEffect(()=>{x()},[]);const p=s=>{r(s||{name:"",role:"",bio:"",image:"",highlights:[],status:"active"}),u(!0)},b=()=>{u(!1),r(null)},c=s=>{const{name:a,value:i}=s.target;r(d=>d?{...d,[a]:i}:null)},z=s=>{try{const a=JSON.parse(s.target.value);r(i=>i?{...i,highlights:a}:null)}catch{const i=s.target.value,d=i.includes(`
`)?i.split(`
`).map(l=>l.trim()).filter(l=>l):i.split(",").map(l=>l.trim()).filter(l=>l);r(l=>l?{...l,highlights:d}:null)}},k=async s=>{if(s.preventDefault(),!t)return;const a=!!t.id;try{if(a){const{error:i}=await o.from("crew_members").update(t).eq("id",t.id);if(i)throw i}else{const{error:i}=await o.from("crew_members").insert([t]);if(i)throw i}b(),x()}catch(i){console.error("Error saving crew member:",i),alert("Error saving crew member. Please try again.")}},E=async s=>{if(confirm("Are you sure you want to delete this crew member?")){g(!0);try{const{error:a}=await o.from("crew_members").delete().eq("id",s);if(a)throw a;x()}catch(a){console.error("Error deleting crew member:",a),alert("Error deleting crew member. Please try again.")}finally{g(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Crew Management"}),e.jsxs("button",{onClick:()=>p(),className:"bg-gold hover:bg-gold/90 text-black px-4 py-2 rounded flex items-center",children:[e.jsx(S,{size:18,className:"mr-2"}),"Add Crew Member"]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-800 rounded-lg p-4 text-sm",children:[e.jsx("h3",{className:"text-blue-400 font-medium mb-1",children:"Crew Information"}),e.jsx("p",{className:"text-gray-300 mb-2",children:"Manage your chauffeurs and staff members who appear on the website. Only crew members with 'active' status will be displayed."}),e.jsxs("div",{className:"flex items-center mt-2 text-yellow-400",children:[e.jsx(q,{size:16,className:"mr-2"}),e.jsx("span",{children:"For highlights, enter one per line or separate with commas."})]})]}),y?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-gold"})}):m.length===0?e.jsxs("div",{className:"text-center py-12 bg-zinc-800 rounded-lg",children:[e.jsx(f,{size:48,className:"mx-auto text-zinc-600 mb-4"}),e.jsx("p",{className:"text-zinc-400",children:'No crew members found. Click "Add Crew Member" to create your first entry.'})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-zinc-800 rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"bg-zinc-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-300 uppercase tracking-wider",children:"Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-zinc-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-700",children:m.map(s=>{var a;return e.jsxs("tr",{className:"hover:bg-zinc-750",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"h-10 w-10 rounded-full object-cover mr-3"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-zinc-600 flex items-center justify-center mr-3",children:e.jsx(f,{size:18,className:"text-zinc-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:s.name}),e.jsxs("div",{className:"text-sm text-zinc-400 truncate max-w-xs",children:[(a=s.bio)==null?void 0:a.substring(0,50),"..."]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-zinc-300",children:s.role}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                      ${s.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>p(s),className:"text-blue-400 hover:text-blue-300 mr-4",children:e.jsx(A,{size:18})}),e.jsx("button",{onClick:()=>E(s.id),className:"text-red-400 hover:text-red-300",disabled:v,children:e.jsx(C,{size:18})})]})]},s.id)})})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-zinc-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl text-white font-semibold mb-4",children:t!=null&&t.id?"Edit Crew Member":"Add New Crew Member"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:(t==null?void 0:t.name)||"",onChange:c,className:"w-full px-4 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-1",children:"Role"}),e.jsx("input",{type:"text",name:"role",value:(t==null?void 0:t.role)||"",onChange:c,className:"w-full px-4 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-1",children:"Bio"}),e.jsx("textarea",{name:"bio",value:(t==null?void 0:t.bio)||"",onChange:c,rows:3,className:"w-full px-4 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-1",children:"Image URL"}),e.jsx("input",{type:"text",name:"image",value:(t==null?void 0:t.image)||"",onChange:c,className:"w-full px-4 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white"}),e.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:"Enter a URL to an image (e.g., from Unsplash)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-1",children:"Highlights (one per line)"}),e.jsx("textarea",{name:"highlights",value:Array.isArray(t==null?void 0:t.highlights)?t==null?void 0:t.highlights.join(`
`):"",onChange:z,rows:4,className:"w-full px-4 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white",placeholder:`Certified in defensive driving techniques
Multilingual: English, Serbian, German
Former diplomatic driver`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:(t==null?void 0:t.status)||"active",onChange:c,className:"w-full px-4 py-2 bg-zinc-700 border border-zinc-600 rounded-lg text-white",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 border border-zinc-600 rounded-lg text-white",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-gold hover:bg-gold/90 text-black rounded-lg",children:t!=null&&t.id?"Update":"Create"})]})]})]})})})]})};export{U as default};
